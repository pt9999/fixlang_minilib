<!DOCTYPE html>
<html>
<head>
<meta charset="utf-8"/>
<title>FixLang Fractal Demo</title>
<style>
body {background: #ffe; } 
div.note1 {background: #fcc; margin-bottom: 2vmin; }
div.note { color: #f88; margin-bottom: 2vmin; }
div.history {background: #fed; padding: 2vmin;}
div.chat {border-bottom: 1px solid #888; margin-bottom: 2vh; }
span.name { color: #174; width: 15vw; margin-right: 5vw; }
div.params {border:1px solid #888; border-radius: 2vmin; margin: 5vmin; padding: 2vmin; }
input.coord { width: 60vw; }
</style>
</head>
<body onload="onload()">
<h1>FixLang Fractal Demo</h1>

<image id="image" width="512" height="512" draggable="false"></image>

<div class="params">
<div><label>X0: <input class="coord" name="x0" type="text" maxlength="80" value=""></label></div>
<div><label>Y0: <input class="coord" name="y0" type="text" maxlength="80" value=""></label></div>
<div><label>X1: <input class="coord" name="x1" type="text" maxlength="80" value=""></label></div>
<div><label>Y1: <input class="coord" name="y1" type="text" maxlength="80" value=""></label></div>
<input type="button" value="Render" onclick="render()">
</div>
<script>
    let x0 = "-2.0", y0 = "-1.25", x1 = "0.5", y1 = "1.25";
    function onload () {
        console.log("init");
        update_form();
        render();
    }
    function update_form ()  {
        get_input("x0").value = x0;
        get_input("y0").value = y0;
        get_input("x1").value = x1;
        get_input("y1").value = y1;
    }
    function get_form() {
        x0 = get_input("x0").value;
        y0 = get_input("y0").value;
        x1 = get_input("x1").value;
        y1 = get_input("y1").value;
    }
    function get_input (name) {
        return document.querySelector(`input[name=${name}]`)
    }
    function render() {
        get_form();
        const url = `/image?x0=${x0}&y0=${y0}&x1=${x1}&y1=${y1}`;
        document.querySelector("#image").src=url;
    }
    /*
    function render() {
        console.log("render")
        const canvas = document.querySelector("canvas");
        const g = canvas.getContext("2d");
        g.fill = "#fff";
        g.fillRect(0, 0, canvas.width, canvas.height);
    }
    */
</script>
</body>
</html>