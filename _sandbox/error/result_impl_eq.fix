module Main;

//impl [e:Eq, a:Eq] Result e a: Eq          // No problem
impl [a:Eq, e:Eq] Result e a: Eq            // Causes a panick
{
    eq = |a, b| (
        if a.is_ok && b.is_ok { a.as_ok == b.as_ok };
        if a.is_err && b.is_err { a.as_err == b.as_err };
        false
    );
}

// Foo does not implement `Eq`
type Foo = unbox struct {
    dummy: I64
};

main: IO ();
main = (
    let res: Result ErrMsg Foo = err("err");
    println(to_string $ res == err("err"))
);
